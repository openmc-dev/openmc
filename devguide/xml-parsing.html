

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>4. XML Input Parsing &mdash; OpenMC Documentation</title>
    
    <link rel="stylesheet" href="../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.5.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/theme_extras.js"></script>
    <link rel="top" title="OpenMC Documentation" href="../index.html" />
    <link rel="up" title="Developer’s Guide" href="index.html" />
    <link rel="next" title="5. State Point Binary File Specifications" href="statepoint.html" />
    <link rel="prev" title="3. Development Workflow" href="workflow.html" /> 
  </head>
  <body>
      <div class="header">
        <a href="../index.html">
          <img class="logo" src="../_static/openmc.png" alt="Logo"/>
        </a>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="workflow.html">3. Development Workflow</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="statepoint.html">5. State Point Binary File Specifications</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="xml-input-parsing">
<span id="devguide-xml-parsing"></span><h1>4. XML Input Parsing<a class="headerlink" href="#xml-input-parsing" title="Permalink to this headline">¶</a></h1>
<p>OpenMC relies on the <a class="reference external" href="https://github.com/andreww/fox">FoX</a> Fortran XML library for reading and intrepreting the
XML input files for geometry, materials, settings, tallies, etc. The use of an
XML format makes writing input files considerably more flexible than would
otherwise be possible.</p>
<p>With the FoX library, extending the user input files to include new tags is
fairly straightforward. The steps for modifying/adding input are as follows:</p>
<p>1. Add appropriate calls to procedures from the <a class="reference external" href="https://github.com/mit-crpg/openmc/blob/develop/src/xml_interface.F90">xml_interface module</a>, such as
<tt class="docutils literal"><span class="pre">check_for_node</span></tt>, <tt class="docutils literal"><span class="pre">get_node_value</span></tt>, and <tt class="docutils literal"><span class="pre">get_node_array</span></tt>. All input
reading is performed in the <a class="reference external" href="https://github.com/mit-crpg/openmc/blob/develop/src/input_xml.F90">input_xml module</a>.</p>
<p>2. Make sure that your input can be categorized as one of the datatypes from
<a class="reference external" href="http://www.w3.org/TR/xmlschema-2/">XML Schema Part 2</a> and that parsing of the data appropriately reflects
this. For example, for a <a class="reference external" href="http://www.w3.org/TR/xmlschema-2/#boolean">boolean</a> value, true can be represented either by &#8220;true&#8221;
or by &#8220;1&#8221;.</p>
<ol class="arabic simple" start="3">
<li>Add code to check the variable for any possible errors.</li>
</ol>
<p>A set of <a class="reference external" href="http://relaxng.org/">RELAX NG</a> schemata exists that enables real-time validation of input
files when using the GNU Emacs text editor. You should also modify the RELAX NG
schema for the file you changed (e.g. src/relaxng/geometry.rnc) so that
those who use Emacs can confirm whether their input is valid before they
run. You will need to be familiar with RELAX NG <a class="reference external" href="http://relaxng.org/compact-tutorial-20030326.html">compact syntax</a>.</p>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="workflow.html">3. Development Workflow</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="statepoint.html">5. State Point Binary File Specifications</a>&#160;&#160;»
        </p>

      </div>


    <div class="footer">
        &copy; Copyright 2011-2014, Massachusetts Institute of Technology.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-30411614-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </body>
</html>