\documentclass{beamer}
%\documentclass[handout,t]{beamer}

\batchmode
% \usepackage{pgfpages}
% \pgfpagesuselayout{4 on 1}[letterpaper,landscape,border shrink=5mm]

\usepackage{amsmath,amssymb,enumerate,epsfig,bbm,calc,color,ifthen,capt-of}

% TikZ packages
\usepackage{tikz}
\usetikzlibrary{arrows,decorations.pathmorphing,decorations.footprints,fadings,calc,trees,mindmap,shadows,decorations.text,patterns,positioning,shapes,matrix,fit}


\usetheme{Berlin}
\usecolortheme{mit}

\title{The OpenMC Monte Carlo Code}
\author{Paul K. Romano}
\date{October 6, 2011}
\pgfdeclareimage[height=0.5cm]{mit-logo}{mit-logo.pdf}
\logo{\pgfuseimage{mit-logo}\hspace*{0.3cm}}

\AtBeginSection[]
{
  \begin{frame}<beamer>
    \frametitle{Outline}
    \tableofcontents[currentsection]
  \end{frame}
}
\beamerdefaultoverlayspecification{<+->}

\include{graphical_settings}

% -----------------------------------------------------------------------------
\begin{document}
% -----------------------------------------------------------------------------

\frame{\titlepage}

\section[Outline]{}
\begin{frame}{Outline}
  \tableofcontents
\end{frame}

% -----------------------------------------------------------------------------
\section{Introduction}

\begin{frame}{Background}
  My background:
  \begin{itemize}
    \item<1-> B.S. Nuclear Engineering, RPI (2007)
    \item<1-> M.S. Nuclear Scince and Engineering, MIT (2009)
  \end{itemize}
  Origin of OpenMC:
  \begin{itemize}
    \item<1-> Working on advanced parallelization for Monte Carlo
    \item<1-> Needed testing platform - MC21?
    \item<1-> Ultimately decided to start from scratch
  \end{itemize}
\end{frame}

\begin{frame}{Goals}
  Overall objectives of OpenMC:
  \begin{itemize}
  \item<1-> Fully featured, capable of realistic physics
  \item<1-> Written in a modern programming language (F2003)
  \item<1-> Easy to understand inner workings
  \item<1-> High performance
  \item<1-> Extensible for research purposes
  \item<1-> Open source and freely available
  \end{itemize}
\end{frame}

\begin{frame}{Monte Carlo}
  Rather than solving the transport equation by discretizing the spatial,
  energy, and angular variables, Monte Carlo solves the transport equation by
  following individual particles as they move stochastically through a medium.
  \begin{itemize}
  \item<1-> Standard deviation $\propto \frac{1}{\sqrt{N}}$
  \end{itemize}
\end{frame}

% -----------------------------------------------------------------------------
\section{Methods and Theory}

\begin{frame}{Solution Algorithm}
  \begin{itemize}
  \item<1-> Loop over particles
    \begin{enumerate}
    \item<1-> Sample particle from distribution
    \item<1-> Track particle to next collision
    \item<1-> Sample nuclide within material
    \item<1-> Sample reaction within nuclide
    \item<1-> Repeat from step 2 until particle dies
    \end{enumerate}
  \end{itemize}

  While particle is being tracked, keep track of collision rate, fission rate,
  etc.
  \begin{equation*}
    \phi = \frac{1}{NV} \sum\limits_{\text{all collisions} \atop \text{in cell}} \frac{w_i}{\Sigma_t (E_i)}
  \end{equation*}

\end{frame}

\begin{frame}{Geometry}
  \begin{itemize}
  \item<1-> All geometry is described as constructive solid geometry (unions and
    intersections of second-order surfaces)
  \item<1-> $Ax^2 + By^2 + Cz^2 + Dxy + Eyz + Fxz + Gx + Hy + Iz + J = 0$
  \item<1-> e.g. to construct an annulus
  \end{itemize}
  \include{annulus}
\end{frame}

\begin{frame}{Cross-Sections}
  \begin{itemize}
  \item<1-> No need to reinvent the wheel
  \item<1-> ACE (A Compact ENDF) Format
    \begin{itemize}
    \item<1-> MCNP
    \item<1-> SERPENT
    \end{itemize}
  \item<1-> Three arrays: NXS, JXS, XSS
  \item<1-> Parse arrays into internal derived types
  \end{itemize}
\end{frame}

\begin{frame}{Union Energy Grid}
  \begin{itemize}
  \item<1-> Each nuclide has cross-sections tabulated at different energy points
  \item<1-> To determine collision type, need to look up microscopic reaction
    cross sections
  \end{itemize}
  \include{union_energy_grid}
\end{frame}

\begin{frame}{Tallies}{}
  {\bf Remember:} In Monte Carlo, the only answer you get is the one you ask
  for. In general, you don't get the global solution like you do in
  deterministic land.
  \begin{itemize}
  \item<1-> Implemented a robust tally system to calculate user-specified
    quantities of interest
  \item<1-> {\bf Filters:} Spatial location, incoming/outgoing energy, birth region, mesh
  \item<1-> {\bf Responses:} Flux, reaction rates, currents, etc.
  \end{itemize}
\end{frame}

\begin{frame}{Parallel Fission Bank}
\end{frame}

% -----------------------------------------------------------------------------
\section{Using OpenMC}

\begin{frame}{Compiling}
\end{frame}

\begin{frame}{XML Input Format}
  Unlike many nuclear codes, OpenMC uses a modular XML input format
  \begin{itemize}
  \item<1-> Building a geometric model -- {\bf geometry.xml}
  \item<1-> Assigning materials to volumes -- {\bf materials.xml}
  \item<1-> Setting parameters for the simulation -- {\bf settings.xml}
  \item<1-> Determining which quantities to score -- {\bf tallies.xml}
  \end{itemize}
\end{frame}

\begin{frame}{Running}
\end{frame}

\begin{frame}{Post-run Analysis}
\end{frame}

% -----------------------------------------------------------------------------
\section{Development}

\begin{frame}{Version Control}
\end{frame}

% -----------------------------------------------------------------------------
\section{Conclusions}
\begin{frame}{Questions?}
  References:
  \begin{itemize}
    \item<1-> Github: \url{http://github.com/paulromano/openmc}.
    \item<1-> Documentation: \url{http://paulromano.github.com/openmc/}.
  \end{itemize}
\end{frame}
% -----------------------------------------------------------------------------
\end{document}
