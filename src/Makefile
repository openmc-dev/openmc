program = openmc

#===============================================================================
# Object Files
#===============================================================================

include OBJECTS

#===============================================================================
# Compiler Options
#===============================================================================

F90 = ifort
F90FLAGS = -fpp -g -traceback

USE_MPI = no

ifeq ($(USE_MPI),yes)
  MPI = /opt/mpich2/1.4-intel
  F90 = $(MPI)/bin/mpif90
  F90FLAGS += -DMPI -f90=ifort
endif

#===============================================================================
# Targets
#===============================================================================

all:	$(program)
$(program): $(objects)
	$(F90) $(objects) -o $@
clean:
	@rm -f *.o *.mod $(program)
neat:
	@rm -f *.o *.mod

#===============================================================================
# Rules
#===============================================================================

.SUFFIXES: .f90 .o
.PHONY: all clean neat

%.o: %.f90
	$(F90) -c $(F90FLAGS) $<

#===============================================================================
# Dependencies
#===============================================================================

include DEPENDENCIES
